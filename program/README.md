# 示例汇编程序说明

本文档介绍了 `program` 文件夹下各个 `.asm` 汇编语言程序的功能和主要内容。这些程序旨在演示为本项目设计的8位CPU的各种指令和编程技巧。

所有程序在编译后，会在 `.hex` 文件的 `0x00` 地址处自动插入一条 `0000` (空操作) 指令，实际的用户程序从 `0x01` 地址开始。

## 程序列表

*   **`test_program.asm`**
    *   **功能**: 一个综合性的测试程序，用于演示CPU的多种基本指令。
    *   **内容**: 包括 `LDI` (加载立即数), `ADD` (加法), `STORE` (存储到内存), `LOAD` (从内存加载), `SUB` (减法), 以及 `JRZ` (条件为零则跳转) 指令，包含一个简单的条件跳转和一个无限循环。

*   **`rectangle_area.asm`**
    *   **功能**: 计算矩形的面积。
    *   **内容**: 假定矩形的长和高分别存储在内存地址 `0x00` 和 `0x01`。程序通过循环加法实现乘法，并将计算得到的面积存储在内存地址 `0x02`。包含对输入值为零的检查。

*   **`simple_math.asm`**
    *   **功能**: 演示基本的算术运算。
    *   **内容**: 使用 `LDI` 加载操作数，执行 `ADD` (加法) 和 `SUB` (减法) 运算，并使用 `STORE` 将中间结果和最终结果存入内存。所有操作均在8位无符号数范围内，避免溢出。

*   **`data_transfer.asm`**
    *   **功能**: 演示数据在寄存器和内存之间的搬运。
    *   **内容**: 使用 `LDI` 将立即数加载到寄存器，`STORE` 将寄存器内容存入指定内存地址，`LOAD` 从内存地址加载数据到寄存器。最后执行一次简单的加法并将结果存入内存，确保操作不产生8位溢出。

*   **`conditional_skip.asm`**
    *   **功能**: 专门演示 `JRZ` (条件为零则跳转) 指令的条件跳转行为。
    *   **内容**: 设置一个值为非零的寄存器和一个值为零的寄存器，分别测试 `JRZ` 指令在条件不满足（不跳转，顺序执行）和条件满足（跳转，跳过后续指令）时的情况。

*   **`loop_counter.asm`**
    *   **功能**: 演示如何使用 `SUB` (减法) 和 `JRZ` (条件为零则跳转) 指令来实现一个简单的循环计数器。
    *   **内容**: 初始化一个计数器寄存器，在循环中递减计数器，并在循环体内执行一个简单的累加操作。当计数器减到零时，循环结束。最终累加结果存储到内存，操作确保在8位无符号数范围内。

## 如何使用

1.  这些 `.asm` 文件可以使用项目提供的 `compiler.py` 汇编器进行编译。
2.  将 `compiler.py` 和目标 `.asm` 文件放置在同一目录下 (例如，都在 `program` 文件夹下)。
3.  运行 `python compiler.py` (或者使用 `startcompiler.bat` 批处理文件)。
4.  汇编器会为每个 `.asm` 文件生成一个对应的 `_rom.hex` 文件。
5.  将生成的 `.hex` 文件加载到Logisim CPU仿真环境中的ROM中即可运行和测试。

